model Notification {
  id        String    @id @default(uuid()) @db.Uuid
  title     String
  body      String?
  type      String
  channel   String
  data      Json?
  sentAt    DateTime?
  createdAt DateTime  @default(now())

  userNotifications UserNotification[]

  @@index([type, channel])
}

model UserNotification {
  id             String   @id @default(uuid()) @db.Uuid
  userId         String   @db.Uuid
  notificationId String   @db.Uuid
  readAt         DateTime?
  createdAt      DateTime @default(now())

  user         User         @relation(fields: [userId], references: [id], onDelete: Cascade)
  notification Notification @relation(fields: [notificationId], references: [id], onDelete: Cascade)

  @@unique([userId, notificationId])
  @@index([userId])
}
